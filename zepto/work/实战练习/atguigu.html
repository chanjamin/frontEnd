<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"/>
    <title>my_zepto实战_练习</title>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="css/animation.css">
</head>
<body>
<div id="container">
    <div class="page     page-current page-1-1  ">
        <img class="img_1 pt-page-moveFromTop " src="img/cover.png" alt=""/>
        <img class="img_2 pt-page-moveFromLeft " src="img/wording_cover.png" alt=""/>
        <img class="img_3 common_img pt-page-moveIconUp " src="img/icon_up.png" alt=""/>
    </div>
    <div class="page    hide page-2-1  ">
        <img class="img_1 hide pt-page-moveFromBottom" src="img/wording.png"/>
        <img class="img_2 hide pt-page-moveCircle" src="img/circle.png"/>
        <img class="img_3 hide pt-page-moveFromLeft" src="img/people.png"/>
        <img class="img_4 hide pt-page-scaleUp" src="img/dot1.png"/>
        <img class="img_5 hide pt-page-scaleUp" src="img/check_develop.png"/>
        <img class="img_6 hide common_img pt-page-moveIconUp" src="img/icon_up.png"/>
        <img class="img_7 hide pt-page-scaleUp" src="img/floating_develop.png"/>
    </div>
    <div class="page hide page-2-2 ">
        <img class="img_1 hide pt-page-flipInLeft" src="img/introduction.png"/>
        <img class="img_2 hide pt-page-flipInLeft" src="img/btn_develop.png"/>
        <img class="img_3 hide pt-page-flipInLeft" src="img/dot2.png"/>
        <img class="img_6 hide common_img pt-page-moveIconUp" src="img/icon_up.png"/>
    </div>


    <div class="page page-3-1 hide">
        <img class="img_1 hide pt-page-moveFromBottom" src="img/wording_design.png"/>
        <img class="img_2 hide pt-page-moveCircle" src="img/circle-design.png"/>
        <img class="img_3 pt-page-moveFromBottom hide" src="img/people_design.png"/>
        <img class="img_4 hide pt-page-scaleUp" src="img/dot1.png"/>
        <img class="img_5 hide pt-page-scaleUp" src="img/check_design.png"/>
        <img class="img_6 hide common_img pt-page-moveIconUp" src="img/icon_up.png"/>
        <img class="img_7 hide pt-page-scaleUp" src="img/floating_design.png"/>
    </div>
    <div class="page page-3-2 hide">
        <img class="img_1 hide pt-page-flipInLeft" src="img/introduction_design.png"/>
        <img class="img_2 hide pt-page-flipInLeft" src="img/btn_design.png"/>
        <img class="img_3 hide pt-page-flipInLeft" src="img/dot2.png"/>
        <img class="img_6 hide common_img pt-page-moveIconUp" src="img/icon_up.png"/>
    </div>

    <div class="page page-4-1 hide">
        <img class="img_1 hide pt-page-moveFromBottom" src="img/wording_production.png"/>
        <img class="img_2 hide pt-page-moveCircle" src="img/circle-production.png"/>
        <img class="img_3 pt-page-moveFromRight hide" src="img/people_production.png"/>
        <img class="img_4 hide pt-page-scaleUp" src="img/dot1.png"/>
        <img class="img_5 hide pt-page-scaleUp" src="img/check_production.png"/>
        <img class="img_6 hide common_img pt-page-moveIconUp" src="img/icon_up.png"/>
        <img class="img_7 hide pt-page-scaleUp" src="img/floating_production.png"/>
        <img class="img_8 hide pt-page-scaleUp" src="img/pic_shadow_production.png"/>
    </div>

    <div class="page page-4-2 hide">
        <img class="img_1 hide pt-page-flipInLeft" src="img/introduction_production.png"/>
        <img class="img_2 hide pt-page-flipInLeft" src="img/btn_production.png"/>
        <img class="img_3 hide pt-page-flipInLeft" src="img/dot2.png"/>
        <img class="img_6 hide common_img pt-page-moveIconUp" src="img/icon_up.png"/>
    </div>
    <div class="page page-5-1 hide">
        <img class="img_1 hide pt-page-rotateCubeBottomIn" src="img/pic_back.png"/>
        <img class="img_2 hide pt-page-rotateCubeTopIn" src="img/btn_join.png"/>
    </div>
</div>
<script src="js/zepto.js" type="text/javascript" charset="utf-8"></script>
<script src="js/touch.js" type="text/javascript" charset="utf-8"></script>
<script src="js/index.js" type="text/javascript" charset="utf-8"></script>
<script>
    // 当hide接触后样式动画立马播放一边
    var direction = {up: 1, down: 3, left: 4, right: 2};
    var lastPage = {row: 1, col: 1}
    var nowPage = {row: 0, col: 0}
    var moving = false;
    $(document).swipeUp(function () {
        pageMove(direction.up)
    })
    $(document).swipeDown(function () {
        pageMove(direction.down)
    })
    // 错误写法，这是直接调用函数
    // $(document).swipeLeft(pageMove(direction.left))
    $(document).swipeLeft(function () {
        pageMove(direction.left)
    })
    $(document).swipeRight(function () {
        pageMove(direction.right)
    })

    function pageMove(dir) {
        switch (dir) {
            case direction.up: {
                if (lastPage.row > 4)
                    return;
                nowPage.row = lastPage.row + 1;
                nowPage.col = lastPage.col;
                outClass = 'pt-page-moveToTop';
                inClass = 'pt-page-moveFromBottom';
                break;
            }
            case direction.down: {
                if (lastPage.row < 2)
                    return;
                nowPage.row = lastPage.row - 1;
                nowPage.col = lastPage.col;
                outClass = 'pt-page-moveToBottom';
                inClass = 'pt-page-moveFromTop';
                break;
            }
            case direction.left: {
                if (lastPage.col > 1)
                    return;
                nowPage.row = lastPage.row;
                nowPage.col = lastPage.col + 1;
                outClass = 'pt-page-moveToLeft';
                inClass = 'pt-page-moveFromRight';
                break;
            }
            case direction.right: {
                if (lastPage.col < 2)
                    return;
                nowPage.row = lastPage.row;
                nowPage.col = lastPage.col - 1;
                outClass = 'pt-page-moveToRight';
                inClass = 'pt-page-moveFromLeft';
            }
        }
        var inner = '.page-' + nowPage.row + "-" + nowPage.col;
        var outter = '.page-' + lastPage.row + "-" + lastPage.col;
        $(outter).addClass(outClass)
        $(outter).addClass('hide')
        $(outter).children().each(function () {
            $(this).addClass('hide')
        })
        $(inner).addClass(inClass)
        $(inner).removeClass('hide');
        setTimeout(function () {
                $(inner).children().each(function () {
                    $(this).removeClass('hide')
                })
            }, 600
        )
        lastPage.row = nowPage.row;
        lastPage.col = nowPage.col;
    }
</script>
</body>
</html>
